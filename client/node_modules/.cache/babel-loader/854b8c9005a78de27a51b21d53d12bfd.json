{"ast":null,"code":"import _objectSpread from \"/Users/fabiencordon/Documents/projets/nhl-playoff-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/fabiencordon/Documents/projets/nhl-playoff-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/fabiencordon/Documents/projets/nhl-playoff-game/client/src/components/Vote.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\nimport Favorite from '@material-ui/icons/Favorite';\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\n\nfunction Vote() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        teams = _useState2[0],\n        setTeams = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        teamsSelected = _useState4[0],\n        setTeamsSelected = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        teamsCount = _useState6[0],\n        setTeamsCount = _useState6[1];\n\n  const _useState7 = useState({}),\n        _useState8 = _slicedToArray(_useState7, 2),\n        inputChecked = _useState8[0],\n        setInputChecked = _useState8[1];\n\n  const handleVote = (e, index) => {\n    if (e.target.checked && teamsCount < 16) {\n      setTeamsSelected([...teamsSelected, e.target.value]);\n      setTeamsCount(teamsCount + 1);\n      setInputChecked(_objectSpread({}, inputChecked, {\n        [index]: !inputChecked.checked[index]\n      }));\n    }\n\n    if (!e.target.checked) {\n      const teamIndex = teamsSelected.indexOf(e.target.value);\n      teamsSelected.splice(teamIndex, 1);\n      setTeamsSelected(teamsSelected);\n      setTeamsCount(teamsCount - 1);\n    }\n  };\n\n  const getTeams = async () => {\n    const response = await axios.get('https://statsapi.web.nhl.com/api/v1/teams');\n    const body = await response.data;\n    return body.teams;\n  };\n\n  useEffect(() => {\n    let isSubscribed = true;\n    getTeams().then(res => isSubscribed && setTeams(res)).catch(err => console.log(err));\n    return () => isSubscribed = false;\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Nombre d'\\xE9quipe s\\xE9lectionn\\xE9e : \", teamsCount), React.createElement(\"section\", {\n    className: \"Home-vote\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, teams.map((team, index) => React.createElement(\"div\", {\n    key: team.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: 'https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/' + team.id + '.svg',\n    alt: team.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      icon: React.createElement(FavoriteBorder, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }),\n      checkedIcon: React.createElement(Favorite, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }),\n      value: team.name,\n      onChange: handleVote(event, index),\n      label: team.name,\n      disabled: teamsCount === 16 && !teamsSelected[team.name],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })))), React.createElement(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    disabled: teamsCount < 16,\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Valider\")));\n}\n\nexport default Vote;","map":{"version":3,"sources":["/Users/fabiencordon/Documents/projets/nhl-playoff-game/client/src/components/Vote.js"],"names":["React","useState","useEffect","axios","FormControlLabel","Checkbox","Button","Favorite","FavoriteBorder","Vote","teams","setTeams","teamsSelected","setTeamsSelected","teamsCount","setTeamsCount","inputChecked","setInputChecked","handleVote","e","index","target","checked","value","teamIndex","indexOf","splice","getTeams","response","get","body","data","isSubscribed","then","res","catch","err","console","log","map","team","name","id","event"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\n\nimport Favorite from '@material-ui/icons/Favorite';\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\n\nfunction Vote() {\n  const [teams, setTeams] = useState([])\n  const [teamsSelected, setTeamsSelected] = useState([])\n  const [teamsCount, setTeamsCount] = useState(0)\n  const [inputChecked, setInputChecked] = useState({})\n\n  const handleVote = (e, index) => {\n    if (e.target.checked && teamsCount < 16) {\n      setTeamsSelected([...teamsSelected, e.target.value])\n      setTeamsCount(teamsCount + 1)\n      setInputChecked({...inputChecked, [index]: !inputChecked.checked[index]})\n    }\n    if(!e.target.checked) {\n      const teamIndex = teamsSelected.indexOf(e.target.value)\n      teamsSelected.splice(teamIndex, 1)\n\n      setTeamsSelected(teamsSelected)\n      setTeamsCount(teamsCount - 1)\n    }\n  }\n\n  const getTeams = async () => {\n    const response = await axios.get('https://statsapi.web.nhl.com/api/v1/teams')\n    const body = await response.data\n    return body.teams\n  }\n\n  useEffect(() => {\n    let isSubscribed = true\n\n    getTeams()\n    .then(res => isSubscribed && setTeams(res))\n    .catch(err => console.log(err))\n\n    return () => isSubscribed = false\n  }, [])\n\n  return (\n    <div>\n      <section>\n        Nombre d'équipe sélectionnée : {teamsCount}\n      </section>\n      <section className='Home-vote'>\n        {teams.map((team, index) => (\n          <div key={team.name}>\n            <img src={'https://www-league.nhlstatic.com/images/logos/teams-current-primary-light/' + team.id + '.svg'} alt={team.name} />\n            <FormControlLabel\n              control={<Checkbox icon={<FavoriteBorder />} checkedIcon={<Favorite />}\n              value={team.name}\n              onChange={handleVote(event, index)}\n              label={team.name}\n              disabled={(teamsCount === 16 && !teamsSelected[team.name])}\n              />}\n            />\n          </div>\n        ))}\n      </section>\n      <section>\n        <Button variant=\"contained\" disabled={teamsCount < 16} color=\"primary\">Valider</Button>\n      </section>\n    </div>\n  )\n}\n\nexport default Vote\n"]},"metadata":{},"sourceType":"module"}